if (self.CavalryLogger) { CavalryLogger.start_js(["e3ftT"]); }

__d("TetraPivotLink.react",["CometBadge.react","CometPressable.react","React","TetraIcon.react","TetraProfilePhoto.react","TetraText.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=36,i={badge:{borderRadius:"fnhzkyyu",display:"j83agx80",end:"yftcgz6f",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"pmk7jnqg",top:"kr520xx4"},icon:{height:"gl3lb2sf",marginEnd:"fv0vnmcu"},pressed:{transform:"mtfd0dr2"},profile:{display:"j83agx80",marginEnd:"fv0vnmcu",marginStart:"fop5sh7t"},profileDisabled:{opacity:"akz8cqyu"},root:{alignItems:"bp9cbjyn",backgroundColor:"tdjehn4e",borderRadius:"rqsj5bl9",display:"j83agx80",flexDirection:"btwxx1t3",height:"tv7at329",justifyContent:"taijpn5t",paddingEnd:"d1544ag0",paddingStart:"tw6a2znq",position:"l9j0dhe7"},selected:{backgroundColor:"oo1teu6h"}};function a(a,c){__p&&__p();var d=a.disabled;d=d===void 0?!1:d;var e=a.hasNewContentBadge;e=e===void 0?!1:e;var f=a.image,j=a.label,k=a.linkProps,l=a.onPress,m=a.selected,n=m===void 0?!1:m;m=a.testOnly_pressed;a=a.testid;var o=null;e&&(o=b("React").jsx("div",{className:(g||(g=b("stylex")))(i.badge),children:b("React").jsx(b("CometBadge.react"),{border:"white",color:d?"gray":"blue",isProfileBadge:!0,size:6})}));e=null;if(f!=null)if(f.type==="icon"){var p=n===!0?"highlight":null;e=b("React").jsx("div",{className:(g||(g=b("stylex")))(i.icon),children:b("React").jsx(b("TetraIcon.react"),{color:d?"disabled":(p=p)!=null?p:"primary",icon:f.icon,size:16})})}else f.type==="profile-photo"&&f.source!=null&&(e=b("React").jsx("div",{className:(g||(g=b("stylex")))(i.profile,d?i.profileDisabled:null),children:b("React").jsx(b("TetraProfilePhoto.react"),{shape:"circle",size:28,source:f.source})}));p=b("React").jsx(b("TetraText.react"),{color:d?"disabled":n===!0?"highlight":"primary",numberOfLines:1,type:"button2",children:j});return b("React").jsxs(b("CometPressable.react"),{disabled:d,display:"inline",linkProps:k,onPress:d?void 0:l,overlayRadius:h/2,ref:c,testOnly_pressed:m,testid:a,xstyle:function(a){a=a.pressed;return[i.root,n===!0&&i.selected,a&&i.pressed]},children:[o,e,p]})}e.exports=b("React").forwardRef(a)}),null);
__d("TextWithEntitiesTruncated.react",["fbt","Link.react","React","TextWithEntities.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("React").PropTypes;var h=b("React").useState,i=.6;function j(a,b,c){return a.map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset-b})}).filter(function(a){return a.offset>=0&&a.offset<c})}function k(a,b,c,d){var e=null,f=a.split("\n");a.length>b&&(e=Math.floor(b*(d===!0?1:i)));if(f.length>c){a=f.slice(0,c).join("\n").length;e!==null?e=Math.min(a,e):e=a}return e}function l(a){var b=[];a.forEach(function(a){a!=null&&a.offset!=null&&a.length!=null&&a.entity!=null&&b.push({entity:babelHelpers["extends"]({},a.entity),length:a.length,offset:a.offset})});return b}function a(a){__p&&__p();var c=a.text,d=a.ranges;d=d===void 0?[]:d;var e=a.truncationStyle;e=e===void 0?"none":e;var f=a.maxLength;f=f===void 0?800:f;var i=a.maxLines;i=i===void 0?8:i;var m=a.useExactMaxLength;a=babelHelpers.objectWithoutPropertiesLoose(a,["text","ranges","truncationStyle","maxLength","maxLines","useExactMaxLength"]);var n=h(!1),o=n[0],p=n[1];if(c==null)return null;n=c;d=l(d);var q=null,r=function(){p(!0)},s=function(){p(!1)};if(e!=="none"&&!o){f=k(c,f,i,m);if(f!=null){n=c.substring(0,f);d=j(d,0,n.length);switch(e){case"ellipsis-only":q=b("React").jsx(b("React").Fragment,{children:g._("\u2026")},"see-more-less");break;case"see-more":case"see-more-and-less":q=b("React").jsxs(b("React").Fragment,{children:[g._("\u2026")," ",b("React").jsx(b("Link.react"),{onClick:r,children:g._("See more")})]},"see-more-less")}}}else e==="see-more-and-less"&&o&&(q=b("React").jsxs(b("React").Fragment,{children:[" ",b("React").jsx(b("Link.react"),{onClick:s,children:g._("See less")})]},"see-more-less"));return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("TextWithEntities.react"),babelHelpers["extends"]({},a,{ranges:d,text:n})),q]})}a.propTypes={text:c.string,ranges:c.arrayOf(c.shape({offset:c.number,length:c.number,entity:c.object})).isRequired,truncationStyle:c.oneOf(["none","ellipsis-only","see-more","see-more-and-less"]),maxLength:c.number,maxLines:c.number,useExactMaxLength:c.bool};e.exports=a}),null);
__d("MessengerMenu.react",["cx","Keys","MenuSeparator.react","MessengerDotComAndInboxM4Check.bs","ReactXUIMenu","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){a.isReactLegacyFactory={},a.type=a}c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d=c.className;c=babelHelpers.objectWithoutPropertiesLoose(c,["className"]);return a.call(this,babelHelpers["extends"]({className:b("joinClasses")(d,"_2i-c"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6_n0":"")+" _150g")},c))||this}var d=c.prototype;d.handleKeydown=function(c,d){return c===b("Keys").DOWN||c===b("Keys").UP||c===b("Keys").SPACE?a.prototype.handleKeydown.call(this,c,d):!0};return c}(b("ReactXUIMenu"));a(c);c.Item=b("ReactXUIMenu").Item;c.Separator=b("MenuSeparator.react");e.exports=c}),null);
__d("XSettingsEmployeeBetaController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/employee/beta_mode/",{enabled:{type:"Bool",defaultValue:!1},redirect:{type:"Bool",defaultValue:!0}})}),null);
__d("MessengerBugNub.react",["cx","fbt","ix","AsyncRequest","CurrentUser","Image.react","Link.react","MessengerEnvironment","MessengerMenu.react","MessengerPopoverMenu.react","React","Tooltip","URI","WorkModeConfig","XSettingsEmployeeBetaController","gkx","goURI"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=i("86836"),l=i("86835"),m=i("86837");a=b("React").PropTypes;var n=b("MessengerMenu.react").Item,o=b("MessengerMenu.react").Separator,p=h._("Report a bug");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("CurrentUser").isEmployee()||this.props.allowExternalReporting&&b("gkx")("984969")?b("React").jsxs("div",{className:"_4_xe"+(b("gkx")("678606")?" _2jqn":""),children:[this.$1(),this.$2()]}):null};d.$2=function(){var a=b("CurrentUser").isEmployee()?"/ajax/bugs/employee_report":"/ajax/bugs/report";return b("React").jsx(b("Link.react"),babelHelpers["extends"]({"aria-label":p,href:"#",ajaxify:a,className:"_1fr8",rel:"dialog"},b("Tooltip").propsFor(p),{children:b("React").jsx("div",{className:"_1gng",children:b("React").jsx(b("Image.react"),{src:k})})}))};d.$1=function(){var a=this.props.isBetaEnabled?l:m,c=h._("Internal preferences");return b("CurrentUser").isEmployee()?b("React").jsx(b("MessengerPopoverMenu.react"),babelHelpers["extends"]({className:"_1fr8",menu:this.$3()},b("Tooltip").propsFor(c),{children:b("React").jsx(b("Link.react"),{"aria-haspopup":"true","aria-label":c,className:"_1gng",href:"#",role:"button",children:b("React").jsx(b("Image.react"),{src:a})})})):null};d.$3=function(){__p&&__p();var a=this,c=null;if(this.props.unixName){var d=this.props.unixName+".sb";c=b("React").jsx(n,{label:"Sandbox",onclick:function(){return a.$4(d)}})}return b("React").jsxs(b("MessengerMenu.react"),{children:[b("React").jsx(n,{label:"Public",onclick:function(){return a.$5(!1)}}),b("React").jsx(n,{label:"Beta",onclick:function(){return a.$5(!0)}}),b("React").jsx(o,{}),b("React").jsx(n,{label:"C1 (trunkstable)",onclick:function(){return a.$4()}}),b("React").jsx(n,{label:"Intern",onclick:function(){return a.$4("intern")}}),b("React").jsx(n,{label:"Production",onclick:function(){return a.$4("prod")}}),c]})};d.$5=function(a){var c=b("XSettingsEmployeeBetaController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({enabled:a}).setMethod("POST").setAllowCrossPageTransition(!0).send()};d.$4=function(a){var c=b("MessengerEnvironment").facebookdotcom?".facebook.com":".messenger.com",d=b("WorkModeConfig").company_subdomain;d=d?d:"www";d=d+(a?"."+a:"")+c;b("goURI")((j||(j=b("URI"))).getRequestURI().getQualifiedURI().setDomain(d))};return c}(b("React").PureComponent);c.propTypes={isBetaEnabled:a.bool,unixName:a.string};e.exports=c}),null);
__d("MessengerContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=12;c=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("ContextualLayerAutoFlipHorizontal"),b("ContextualLayerUpdateOnScroll"),b("LayerHideOnEscape"),b("AccessibleLayer")],displayName:"MessengerContextualDialog",shouldSetARIAProperties:!1,theme:{wrapperClassName:"_1r_9",arrowDimensions:{offset:a,length:16}}}));e.exports=c}),null);
__d("MessengerConstants",[],(function(a,b,c,d,e,f){"use strict";a={NEW_THREAD_KEY:"new",BROWSER_EXTENSIONS_DIALOG_DIMENSIONS:{HEIGHT:604,WIDTH:405}};e.exports=a}),null);
__d("MessengerAddIconSVGReact.bs",["fbt","React","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("add to group"),i=b("ReasonReact.bs").statelessComponent("MessengerAddIconSVGReact");function j(a,c,d){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(d){return(d=b("React")).createElement("div",{className:a},d.createElement("svg",{viewBox:"-8 -8 48 48"},d.createElement("title",void 0,h),d.createElement("path",{clipRule:"evenodd",d:"M16,0 V32 M0,16 H32",fill:"none",fillRule:"evenodd",stroke:c,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.className,a.customColor,[])});f.addToGroup=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerContextualDialogReact.bs",["bs_curry","ReasonReact.bs","bs_js_null_undefined","MessengerContextualDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)switch(a){case 0:return"center";case 1:return"left";case 2:return"right"}}function a(a,c,d,e,f,h,i,j,k){if(d!==void 0){var l=d;d=function(a){return b("bs_js_null_undefined").fromOption(b("bs_curry")._1(l,0))}}else d=function(a){return};return b("ReasonReact.bs").wrapJsForReason(b("MessengerContextualDialog.react"),{alignment:b("bs_js_null_undefined").fromOption(g(a)),className:b("bs_js_null_undefined").fromOption(c),contextRef:d,offsetY:b("bs_js_null_undefined").fromOption(f),onBlur:b("bs_js_null_undefined").fromOption(e),onToggle:h,shown:b("bs_js_null_undefined").fromOption(i),width:b("bs_js_null_undefined").fromOption(j)},k)}f.stringOfAlignment=g;f.make=a}),null);
__d("MessengerDeliveryReceipt.bs",["bs_belt_Option","bs_belt_MapString"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(a,c),0)}c=b("bs_belt_Option").getWithDefault;f.$pipe$question=c;f.getDeliveryTimeOfThread=a}),null);
__d("MessengerDialogs.re",["bs_curry","MessengerDialogs.bs"],(function(a,b,c,d,e,f){a=b("MessengerDialogs.bs").showDialog;f.showDialog=a;c=function(a,c){a=b("bs_curry")._2(b("MessengerDialogs.bs").removeDialog,a.dialog,c);return a};f.removeDialog=c;d=b("MessengerDialogs.bs").removeAllDialogs;f.removeAllDialogs=d}),null);
__d("MessengerParticipants.re",["bs_curry","MessengerParticipants.bs"],(function(a,b,c,d,e,f){__p&&__p();a=function(a,c){a=b("bs_curry")._2(b("MessengerParticipants.bs").get,a,c);return a};f.get=a;c=b("MessengerParticipants.bs").getNow;f.getNow=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerParticipants.bs").getMulti,a,c);return a};f.getMulti=d;e=function(a,c){a=b("bs_curry")._2(b("MessengerParticipants.bs").getMultiEager,a,c);return a};f.getMultiEager=e;a=function(a,c){a=b("bs_curry")._2(b("MessengerParticipants.bs").getMultiEagerMap,a,c);return a};f.getMultiEagerMap=a;c=b("MessengerParticipants.bs").removeCallback;f.removeCallback=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerParticipants.bs").getOrderedBigImageMulti,a,c);return a};f.getOrderedBigImageMulti=d}),null);
__d("MessengerReasonDialogContainerReact.bs",["bs_list","bs_array","bs_block","bs_curry","React","ReasonReact.bs","MessengerDialogs.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").reducerComponent("MessengerReasonDialogContainer");function h(a){__p&&__p();return[g[0],g[1],g[2],g[3],function(a){return b("MessengerDialogs.bs").addHandler(function(c){return b("bs_curry")._1(a[3],[c])})},g[5],g[6],g[7],function(a){a=a[1];if(a!==void 0)return b("React").createElement("div",void 0,b("bs_array").of_list(b("bs_list").rev(a)).map(function(a,c){return b("React").createElement("span",{key:String(c)},b("bs_curry")._1(a,0))}));else return null},function(a){return},g[10],function(a,c){return b("bs_block").__(0,[a[0]])},g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h([])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","MercuryShareStyleMap","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MercuryShareStyleMap").getStyleFactory(this.props.attachment);if(a.factory&&!!a.factory.getSnippetComponent){var c=a.factory.getSnippetComponent();return b("React").jsx(c,babelHelpers["extends"]({},this.props,{attachment:a.attachment}))}return null};return c}(b("React").Component);c.propTypes={attachment:b("MercuryShareAttachmentReactShape"),isSenderViewer:a.bool,senderName:a.oneOfType([a.string,a.object])};e.exports=c}),null);
__d("MercuryAttachmentSnippet.react",["cx","fbt","ix","EmoticonsList","Image.react","MercuryAttachment","MercuryAttachmentSnippetRenderer","MercuryAttachmentSnippetType","MercuryIDs","MercuryShareAttachmentSnippet.react","MessengerParticipants.bs","MessengerTextWithEmoticons.react","React","StickerConstants","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=function(a){c.$20=a.viewer,c.$21=a.thread.snippet_sender,c.$5=a.thread.snippet_attachments,c.$19=j(c.$21,c.$20)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1(this.props.thread.snippet_sender),this.$2(this.props)};d.UNSAFE_componentWillReceiveProps=function(a){this.$1(a.thread.snippet_sender),this.$2(a)};d.componentWillUnmount=function(){this.$3()};d.render=function(){__p&&__p();var a=this.$4(),c=b("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(this.$5);switch(c){case b("MercuryAttachmentSnippetType").PHOTO:return this.$6(a);case b("MercuryAttachmentSnippetType").GIF:return this.$7(a);case b("MercuryAttachmentSnippetType").VIDEO:return this.$8(a);case b("MercuryAttachmentSnippetType").AUDIO_CLIP:return this.$9(a);case b("MercuryAttachmentSnippetType").LIKE_STICKER:return this.$10(a);case b("MercuryAttachmentSnippetType").STICKER:return this.$11(a);case b("MercuryAttachmentSnippetType").SHARE:return this.$12(a);case b("MercuryAttachmentSnippetType").GIFT:return this.$13(a);case b("MercuryAttachmentSnippetType").FILE:return this.$14(a);case b("MercuryAttachmentSnippetType").ERROR:return this.$15(a);case b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER:return this.$16(a);default:return this.$17(a)}};d.$6=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").PHOTO,this.$19,a,this.$5))};d.$14=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").FILE,this.$19,a,this.$5))};d.$7=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").GIF,this.$19,a,this.$5))};d.$8=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").VIDEO,this.$19,a))};d.$9=function(a){return this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").AUDIO_CLIP,this.$19,a))};d.$16=function(a){return b("React").jsx("span",{children:b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER,this.$19,a)})};d.$10=function(a){var c=b("React").jsx(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,text:b("EmoticonsList").symbols.like});if(this.$19)return b("React").jsx("span",{children:h._("You: {conversation_snippet}",[h._param("conversation_snippet",c)])});else return this.props.thread.is_canonical?b("React").jsx("span",{children:h._("{conversation_snippet}",[h._param("conversation_snippet",c)])}):b("React").jsx("span",{children:h._("{sender name}: {conversation_snippet}",[h._param("sender name",a),h._param("conversation_snippet",c)])})};d.$11=function(a){return b("React").jsx("span",{children:b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").STICKER,this.$19,a)})};d.$12=function(a){return this.$5[0].share?b("React").jsx(b("MercuryShareAttachmentSnippet.react"),{attachment:this.$5[0].share,senderName:a,isViewerSender:this.$19}):this.$18(b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").SHARE,this.$19,a))};d.$13=function(a){return b("React").jsx("span",{children:b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").GIFT,this.$19,a)})};d.$17=function(a){var c=this;return b("React").jsx("span",{children:this.$5.filter(function(a){return a.attach_type==="file"||a.attach_type==="photo"||a.attach_type==="video"}).map(function(a,b){return c.$18(a.name,a.icon_type,b)})})};d.$18=function(a,c,d){c=b("MercuryAttachment").getAttachIconClass(c||this.$5[0].icon_type);c=b("joinClasses")(c,"uiIconText _3l6h");return b("React").jsxs("span",{children:[b("React").jsx("span",{className:c,children:b("React").jsx(b("Image.react"),{src:i("86988")})}),a]},d)};d.$15=function(a){a=b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetType").ERROR,this.$19,a);return this.$18(a)};d.$4=function(){if(!this.$21||this.$19)return null;var a=b("MessengerParticipants.bs").getNow(this.$21);if(!a)return null;var c=b("MercuryIDs").getUserIDFromParticipantID(this.$21);c=this.props.thread.custom_nickname&&this.props.thread.custom_nickname[c];c&&(c=b("React").jsx(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c}));return c?c:a.short_name};d.$1=function(a){var c=this;if(!a)return;this.$3();b("MessengerParticipants.bs").getNow(a)||(this.$22=b("MessengerParticipants.bs").get(a,function(a){return c.forceUpdate()}))};d.$3=function(){this.$22&&b("MessengerParticipants.bs").removeCallback(this.$22)};return c}(b("React").Component);c.propTypes={thread:a.object.isRequired,viewer:a.string.isRequired};function j(a,c){return!!(a&&b("MercuryIDs").getParticipantIDFromUserID(c)==a)}e.exports=c}),null);
__d("AdPageMessageTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble"})}),null);
__d("MNAdsLogMessageUtils",["AdPageMessageTypeEnum","MercuryConfig","MessagingTag"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryConfig").LOG_INTERVAL_MS||6e4;a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.isLoggedWithinInterval=function(a){return this.$1[a]&&this.$1[a]-Date.now()<g?!0:!1};c.setLoggingTime=function(a){this.$1[a]=Date.now()};c.logAdsThreadListImpression=function(a){switch(a.folder){case b("MessagingTag").INBOX:this.logWithThreadMetaData(a,"messenger_ads_message_seen_inbox");break;case b("MessagingTag").PENDING:this.logWithThreadMetaData(a,"messenger_ads_message_seen_request");break;default:return}};c.logWithThreadMetaData=function(a,c){if(a.last_message_type!==b("AdPageMessageTypeEnum").NON_AD)return};return a}();e.exports=new a()}),null);
__d("MercuryThreadSnippet.react",["cx","fbt","MercuryAttachmentSnippet.react","MercuryIDs","MessengerTextWithEmoticons.react","MNAdsLogMessageUtils","React","StoryAttachmentStyle","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return this.props.shouldRenderYou!==a.shouldRenderYou||this.props.thread!==a.thread||this.props.viewer!==a.viewer||this.props.className!==a.className||!b("immutable").is(a.participants,this.props.participants)};d.render=function(){return b("React").jsxs("span",{className:this.props.className,children:[this.$1(),this.$2()]})};d.$1=function(){return!this.props.thread.snippet||!i(this.props.thread)?null:b("React").jsx("span",{className:"_j0r"})};d.$2=function(){__p&&__p();var a,c,d=this.props.thread,e=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),f=d.snippet?d.snippet.toString():null,g=this.props.shouldRenderYou;if(d.snippetCount!=null)return h._({"*":"{number} results","_1":"1 result"},[h._plural(d.snippetCount,"number")]);c=(c=d)!=null?(c=c.snippet_attachments)!=null?(c=c[0])!=null?c.share:c:c:c;a=(a=c)!=null?(a=a.style_list)!=null?a[0]:a:a;c=(c=c)!=null?c.title:c;if((a==="instant_games_leaderboard_update"||a==="instant_games_custom_update")&&c)return c;if(d.snippet_attachments&&d.snippet_attachments.length>0&&d.snippet_attachments[0].attach_type!=="share"||!d.snippet_sender)return this.$3(f);if(j(d))return b("React").jsx(b("MercuryAttachmentSnippet.react"),{thread:d,viewer:this.props.viewer});a=this.$3(f);b("MNAdsLogMessageUtils").logAdsThreadListImpression(d);c=k(d);if(c)return h._("{name}: {conversation_snippet}",[h._param("name",c),h._param("conversation_snippet",a)]);if(d.snippet_sender===e)return!g?a:h._("You: {conversation_snippet}",[h._param("conversation_snippet",a)]);if(b("MercuryIDs").isCanonical(d.thread_id)&&!this.props.shouldAlwaysRenderSender)return a;f=this.props.participants.get(d.snippet_sender);if(!f)return a;c=f.short_name||f.name;if(d){e=d.custom_nickname?d.custom_nickname:null;g=b("MercuryIDs").getUserIDFromParticipantID(f.id);e&&g&&e[g]&&(c=b("React").jsx(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e[g]}))}return!c?a:h._("{name}: {conversation_snippet}",[h._param("name",c),h._param("conversation_snippet",a)])};d.$3=function(a){if(a&&a.startsWith("?OTR"))return h._("[encrypted message]");var c=this.props.thread;if(i(c))return b("React").jsx(b("MercuryAttachmentSnippet.react"),{thread:c,viewer:this.props.viewer});return a?b("React").jsx(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:a}):null};return c}(b("React").Component);c.propTypes={participants:a.instanceOf(b("immutable").Map).isRequired,shouldAlwaysRenderSender:a.bool,shouldRenderYou:a.bool,thread:a.object.isRequired,viewer:a.string.isRequired};function i(a){return!!(a.snippet_attachments&&a.snippet_attachments.length>0&&!(a.snippet_attachments[0].attach_type==="share"&&(!a.snippet_attachments[0].share||a.snippet_attachments[0].share.subattachments.length===0)))}function j(a){var b;a=a.snippet_attachments;return a&&a.length===1&&a[0].attach_type==="share"&&((b=a[0].share)==null?void 0:b.style_list)!=null&&(a[0].share.style_list.indexOf("message_location")>=0||a[0].share.style_list.indexOf("message_live_location")>=0)}function k(a){return a&&a.snippet_attachments&&a.snippet_attachments[0]&&a.snippet_attachments[0].share&&a.snippet_attachments[0].share.target&&a.snippet_attachments[0].share.target.genie_name?a.snippet_attachments[0].share.target.genie_name:null}e.exports=c}),null);
__d("MercuryMessageStore",["CurrentUser","LogHistory","MercuryAPIArgsSource","MercuryThreadInformer","MercuryThreadlistConstants","MessengerState.bs","SubscriptionsHandler","mixInEventEmitter","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("mercury_message_store");a=function(){__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.$5=a;this.$1=d||b("CurrentUser").getID();this.$2=1;this.$3=c||b("MercuryThreadlistConstants").RECENT_MESSAGES_LIMIT;this.$6=d?b("MercuryThreadInformer").getForFBID(d):b("MercuryThreadInformer").get();this.$4=new(b("SubscriptionsHandler"))();this.$4.addSubscriptions(this.$6.subscribe("messages-received",function(a,b){return e.$7(b)}),this.$6.subscribe("messages-updated",function(a,b){return b[e.$5]&&e.$8(b[e.$5])}),this.$6.subscribe("messages-reordered",function(a,b){return b[e.$5]&&e.$9()}),this.$6.subscribe("thread-invalidated",function(a,b){return b[e.$5]&&e.$10()}));a=this.$11();g.debug("constructed",JSON.stringify({threadID:this.$5,messageCount:a}));a<this.$3?this.$12():b("setImmediate")(function(){e.$9()})}var c=a.prototype;c.destroy=function(){this.$4&&this.$4.release(),g.debug("destroyed",JSON.stringify({threadID:this.$5}))};c.subscribe=function(a){return this.addRetroactiveListener("updated",a)};c.fetchMoreMessages=function(){if(this.hasFetchedAll())return!1;this.$12();return!0};c.hasFetchedAll=function(){return b("MessengerState.bs").hasLoadedAllMessages(this.$1,this.$5)||b("MessengerState.bs").isNewEmptyLocalThread(this.$1,this.$5)};c.$11=function(){return b("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,this.$5).length};c.$12=function(){var a=this,c=this.$3;b("MessengerState.bs").getThreadMessagesRange(this.$1,this.$5,this.$11(),c,this.$13.bind(this),null,b("MercuryAPIArgsSource").MERCURY);this.$2<10&&(this.$2+=1);b("MessengerState.bs").hasLoadedNMessages(this.$1,this.$5,c+this.$11())&&b("setImmediate")(function(){a.$9()})};c.$13=function(b){g.debug("fetch_messages",JSON.stringify({threadID:this.$5,fetchedMessagesCount:b&&b.length||0,messageCount:this.$11()})),b&&!b.length&&!this.$11()&&this.$14(a.THREAD_IS_EMPTY)};c.$7=function(b){var c=[];b=b[this.$5];b&&b.length&&(c=c.concat(b.filter(function(a){return!!a})));c.length&&this.$14(a.MESSAGES_RECEIVED)};c.$8=function(b){this.$14(a.MESSAGES_CHANGED)};c.$9=function(){this.$14(a.MESSAGES_REORDERED)};c.$10=function(){this.$2=1,this.$12()};c.$14=function(a){var c=b("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,this.$5);this.releaseHeldEventType("updated");this.emitAndHold("updated",{messages:c,eventType:a})};return a}();Object.assign(a,{MESSAGES_FETCHED:"fetched",MESSAGES_CHANGED:"changed",MESSAGES_RECEIVED:"received",MESSAGES_REORDERED:"reordered",THREAD_IS_EMPTY:"thread-is-empty"});b("mixInEventEmitter")(a,{updated:!0});e.exports=a}),null);
__d("MNCommerceDialogStateActions",["MessengerDispatcher","MNCommerceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={showDialog:function(a,c){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").DIALOG.SHOW,dialogContainer:a,state:c})},hideDialog:function(){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").DIALOG.HIDE})}};e.exports=a}),null);
__d("MessengerCowatchConfig",["gkx"],(function(a,b,c,d,e,f){"use strict";a={isMessengerDotComEntrypointEnabled:function(){return b("gkx")("939331")},hasZenonCowatchCapability:function(){return b("gkx")("939331")},hasZenonGroupCowatchCapability:function(){return b("gkx")("939331")}};e.exports=a}),null);
__d("MessengerSortParticipants",["immutable"],(function(a,b,c,d,e,f){a={sortAlphabeticalWithAdmins:function(a,b){var c=b.filter(function(b){return!!b&&a&&a.indexOf(b.fbid)!==-1}).toArray().sort(function(a,b){return a.name.localeCompare(b.name)});b=b.filter(function(b){return!!b&&(!a||a.indexOf(b.fbid)===-1)}).toArray().sort(function(a,b){return a.name.localeCompare(b.name)});return c.concat(b)}};e.exports=a}),null);
__d("WorkGalahadQuickChatActions",["MercuryIDs","WorkGalahadBeeperActions","WorkGalahadBeeperStore","WorkGalahadDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/hide"})}function c(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/close"})}function d(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/showCompose"})}function f(a){if(!b("MercuryIDs").isValidThreadID(a))return;b("WorkGalahadBeeperStore").getChatBeeps()[a]&&b("WorkGalahadBeeperActions").xoutBeeper(a);b("WorkGalahadDispatcher").dispatch({type:"quickChat/openThreadID",threadID:a})}function g(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/showInbox"})}function h(){b("WorkGalahadDispatcher").dispatch({type:"quickChat/hideInbox"})}e.exports={hide:a,close:c,openThreadID:f,showCompose:d,showInbox:g,hideInbox:h}}),null);
__d("XMessengerDotComNUXLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logging/promotion/",{promotion_id:{type:"Int",required:!0},instance_log_data:{type:"StringToStringMap",defaultValue:{}}})}),null);
__d("XWorkplaceDesktopDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/desktop/download/{?file}/",{build:{type:"String"},file:{type:"String"},ref:{type:"String"}})}),null);